{"version":3,"sources":["qidian/qidian.js","qidian/index.js"],"names":["bootstrap","location","host","pathname","window","addEventListener","progress","expList","document","getElementsByClassName","length","click","timeIntervals","nowDate","Date","nowTime","getTime","today","getDay","GM_getValue","todayCnt","nowInterval","console","log","tab","GM_openInTab","setTimeout","close","GM_setValue"],"mappings":";AAAe,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAAA,IAAA,EAAA,CACXA,UAAY,WAELC,GAAiB,iBAAjBA,SAASC,MAAgD,KAArBD,SAASE,SAM7CF,GAAiB,iBAAjBA,SAASC,MAAgD,UAArBD,SAASE,SAUhDC,OAAOC,iBAAiB,OAAQ,KAAKC,UAAU,OAV5CL,CAOCG,OAAOC,iBAAiB,OANT,WACPE,IAAAA,EAAUC,SAASC,uBAAuB,YAC1CF,EAAQG,OAAS,GACjBH,EAAQ,GAAGI,UAGqB,QAZxCV,SAASE,SAAW,UAiB5BG,SAAW,WAEHM,IAAAA,EAAgB,CAAC,EAAG,IAAK,IAAK,KAAM,KAAM,KAAM,KAAM,MAItDC,EAAU,IAAIC,KACdC,EAAUF,EAAQG,UAClBC,EAAQJ,EAAQK,SAGjBC,GAAAA,YARY,QAQU,IAAMF,EAA5BE,CAICC,IAAAA,EAAWD,YAXG,YAWsB,GAEpCE,GAAeN,EADCI,YAXG,kBAW2BJ,IACR,IAGvCM,GADHC,QAAQC,IAAI,gBAAiBF,EAAaT,EAAcQ,IACrDC,GAAeT,EAAcQ,GAAU,CAClCI,IAAAA,EAAMC,aAAa,+BAA+B,GACtDC,WAAWF,EAAIG,MAAO,OACtBP,GACeR,EAAcF,SACzBU,EAAW,EACXQ,YAvBO,QAuBeX,IAG1BW,YAzBc,YAyBWR,GACzBQ,YAzBmB,kBAyBWb,OAnD3B,QAAA,QAAA;;ACEf,aAFA,IAAA,EAAA,EAAA,QAAA,aAEA,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAGWf,EAAAA,QAAAA","file":"index.js","sourceRoot":"../src","sourcesContent":["export default {\n    bootstrap() {\n        // 自动登录后只能跳到首页，这里自动跳去领取页\n        if(location.host == \"my.qidian.com\" && location.pathname == \"/\"){\n            location.pathname = \"/level\"\n            return\n        }\n\n        // 当打开的页面是经验值领取页则自动领取经验值\n        if(location.host == \"my.qidian.com\" && location.pathname == \"/level\"){\n            const expGet = function(){\n                let expList = document.getElementsByClassName(\"elGetExp\");\n                if (expList.length > 0) {\n                    expList[0].click();\n                }\n            }\n            window.addEventListener('load', expGet, false);\n            return\n        }\n        window.addEventListener('load', this.progress, false);\n    },\n    progress() { \n        // 计算逻辑，每次打开任意网页时执行，上次领取时间间隔满足领取条件则自动打开经验值领取页\n        let timeIntervals = [0, 300, 600, 1200, 1800, 3600, 3600, 3600]\n        let todayKey = \"today\"\n        let todayCntKey = \"today_cnt\"\n        let lastCheckTimeKey = \"last_check_time\"\n        let nowDate = new Date()\n        let nowTime = nowDate.getTime();\n        let today = nowDate.getDay();\n\n        // 如果今天已经领完了则不再继续领\n        if(GM_getValue(todayKey, 0) == today){\n            return\n        }\n\n        let todayCnt = GM_getValue(todayCntKey, 0)\n        let lastCheckTime = GM_getValue(lastCheckTimeKey, nowTime)\n        let nowInterval = (nowTime-lastCheckTime)/1000\n\n        console.log(\"QidianTimer: \", nowInterval, timeIntervals[todayCnt])\n        if(nowInterval >= timeIntervals[todayCnt]){\n            let tab = GM_openInTab(\"https://my.qidian.com/level\", true)\n            setTimeout(tab.close, 5000)\n            todayCnt++\n            if(todayCnt >= timeIntervals.length){\n                todayCnt = 0\n                GM_setValue(todayKey, today)\n            }\n\n            GM_setValue(todayCntKey, todayCnt)\n            GM_setValue(lastCheckTimeKey, nowTime)\n        }\n    }\n};","import qidian from './qidian'\n\n(function() {\n    'use strict';\n\n    qidian.bootstrap();\n})();\n"]}